function pressJSONP(t){var e=t.shop_data;positions=[];for(var a=0;5>a;a++)$($(".shoppic")[a]).attr("src",e[a].shop_ico),$($(".shopname")[a]).text(e[a].shop_name),$($(".shopsell")[a]).text("主营："+e[a].main),$($(".shopad")[a]).text("地址："+e[a].addr),$($(".shopvst")[a]).text("人气："+e[a].shop_visit+"次浏览"),positionx=e[a].map_longitude,positiony=e[a].map_latitude,position=[positionx,positiony],positions.push(position),init(e)}function init(t){var e=new AMap.Map("map",{center:positions[0],zoom:10});e.plugin(["AMap.ToolBar"],function(){e.addControl(new AMap.ToolBar)});for(var a=new AMap.Icon({image:"./images/map.png",size:new AMap.Size(24,38)}),n=[],i=[],o=0;5>o;o++)!function(o){n[o]=new AMap.Marker({icon:a,position:positions[o],offset:new AMap.Pixel(-12,-12),map:e}),i[o]=new AMap.InfoWindow({content:infocnt(t[o]),offset:new AMap.Pixel(0,-28)});AMap.event.addListener(n[o],"click",function(){i[o].open(e,n[o].getPosition())})}(o)}function infocnt(t){return $(".ifshopname").text(t.shop_name),$(".ifshopmain").text("主营："+t.main),$(".ifshopad").text("地址："+t.addr),$(".ifshophref").attr("href",t.shop_addr),$(".infocnt").html()}var citycheck=document.getElementsByName("citycheck")[0],citycnt=document.getElementsByClassName("citycnt")[0],closecitycnt=document.getElementsByName("closecitycnt");citycheckClick=function(t){var e=t||window.e;e.preventDefault(),citycnt.style.display="block"},citycheck.addEventListener("click",citycheckClick),closecitycnt[0].onclick=function(t){t||window.e;citycnt.style.display="none"};for(var datapre=document.getElementsByClassName("datapre")[0],datanext=document.getElementsByClassName("datanext")[0],datapg=document.getElementsByClassName("datapg"),i=0;i<datapg.length;i++)!function(t){datapg[t].onclick=function(e){var a=e||window.e;a.preventDefault(),t>0&&(datapre.style.display="inline-block");for(var n=0;n<datapg.length;n++)datapg[n].style.background="white",datapg[n].style.color="#9F9999";this.style.background="#FC6621",this.style.color="#fff"}}(i);for(var mapdatapre=document.getElementsByClassName("mapdatapre")[0],mapdatanext=document.getElementsByClassName("mapdatanext")[0],mapdatapg=document.getElementsByClassName("mapdatapg"),i=0;i<mapdatapg.length;i++)!function(t){mapdatapg[t].onclick=function(e){var a=e||window.e;a.preventDefault(),t>0&&(mapdatapre.style.display="inline-block");for(var n=0;n<mapdatapg.length;n++)mapdatapg[n].style.background="white",mapdatapg[n].style.color="#9F9999";this.style.background="#FC6621",this.style.color="#fff"}}(i);for(var listitem=document.getElementsByClassName("listitem"),i=0;i<listitem.length;i++)!function(t){listitem[t].onmouseover=function(){$($(".itemcntright")[t]).css("display","block")}}(i);for(var i=0;i<listitem.length;i++)!function(t){listitem[t].onmouseout=function(){$($(".itemcntright")[t]).css("display","none")}}(i);$(document).ready(function(){function t(){var t=$(this).text(),e="http://localhost:3000/tcb/shops/pagecount/"+t+"?callblack=?";$.getJSON(e,pressJSONP)}urlfirst="http://localhost:3000/tcb/shops/pagecount/1?callblack=?",$.getJSON(urlfirst,pressJSONP),$(".mapclose").on("click",function(){$("#mapcnt").css("display","none"),$("#motai").css("display","none")}),$(".map").on("click",function(){$("#mapcnt").css("display","block"),$("#motai").css("display","block"),$.getJSON(urlfirst,pressJSONP)}),$(".datapg").on("click",t),$(".mapdatapg").on("click",t)});var positions,shops;